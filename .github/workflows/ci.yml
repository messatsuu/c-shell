name: CI Pipeline

# Trigger the workflow on push or pull request to the main branch
on:
    push:
        branches:
          - main
        pull_request:
            branches:
              - main

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v2

            - name: Set up NixOS Docker container
              run: |
                  docker pull nixos/nix
                  docker run -v $PWD:/workspace nixos/nix /bin/sh -c "echo 'workspace:'; ls /workspace; cd /workspace && nix-shell --run 'make brt'"
