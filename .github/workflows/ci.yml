name: CI Pipeline

# Trigger the workflow on push or pull request to the main branch
on:
    push:
        branches:
          - main
        pull_request:
            branches:
              - main

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Run tests in nix-shell
              run: |
                  docker pull nixos/nixos
                  docker run -v $(pwd):/workspace nixos/nixos /bin/bash -c "cd /workspace && nix-shell --run 'make brt'"
